# 🛡️ AI 기반 자산 EoS 및 취약점 자동 모니터링 시스템
> **Project: Smart AI Security Monitor**

자산(서버, SW, DB)의 **기술지원 종료(EoS)** 현황을 자동 관리하고, 매일 쏟아지는 보안 뉴스 중 **내 자산에 치명적인 위협**만을 선별하여 알려주는 지능형 보안 비서 프로젝트입니다.

---
## 🔔 Slack 알림 연동 [1.18 추가]
이 프로젝트는 위험이 감지되면 Slack 채널로 즉시 알림을 보냅니다.

---

## 🎯 프로젝트 목적
- **자동화에 의한 효율성 증가:** 수동으로 관리되던 EoS 날짜 및 취약점 매칭의 자동화
- **Alert Fatigue 감소:** 단순 키워드 매칭이 아닌, **LLM(Gemini)의 문맥 분석**을 통해 실제 위험한 버전인지 판단 후 알림
- **하이브리드 엔진:** 정확성이 필요한 EoS는 **API** 로, 문맥 판단이 필요한 취약점 분석은 **AI(LangChain)** 로 이원화

---

## 🤖 기능 추가 고려사항
- **AI API 요청 최소화:** RSS 데이터를 주기적으로 확인. 최초 데이터를 DB에 저장 후 공지가 새로 업데이트 되었을 때에만 AI에게 요청하는 로직 만들기
- **자산 외부 노출 방지:** AI는 효과적으로 RSS데이터의 키워드만 가져오는 용도로 사용. 만약 회사에 적용한다면 별도 내부서버에 하드코딩된 프로그램을 이용해서 매칭. 

---
### 📥 Input (입력)
1. **자산 관리 대장 (`assets.xlsx`)**
   - 사용중인 소프트웨어 및 OS 정보 리스트
   - *예시: Tomcat (8.5.27), MongoDB (4.4.10)*
2. **보안 인텔리전스 소스 (Real-time)**
   - **EoS 정보:** `endoflife.date` 공식 API
   - **취약점 뉴스:** KISA(인터넷보호나라) 보안 권고문 RSS

### 📤 Output (출력)
1. **EoS 현황 리포트**
   - 기술지원 종료(Expired) 및 임박(Warning) 자산 식별
   - *예시: "🚨 [만료됨] Tomcat 8.5.7 (종료일: 2024-03-31)"*
2. **맞춤형 취약점 경고**
   - AI가 뉴스를 분석하여 내 자산 버전에 영향을 주는 경우에만 경고 발송
   - *예시: "🚨 [위험] MongoDB (4.4.10) - 뉴스에 명시된 취약 버전 범위(4.4.0~4.4.30)에 포함됨"*
---

### 💻출력 예시
```plain
📋 총 11개의 자산 데이터를 로드했습니다.

⏳ [Phase 1] 소프트웨어 기술지원 종료(EoS) 점검 중...
   ✅ [양호] Windows Server 2016.0
   🚨 [만료됨] Tomcat 8.5.27 (종료일: 2024-03-31)
   ⚠️ [임박함] MariaDB 10.6.21 (남은기간: 182일)
   ⚠️ [임박함] Redis 7.2.4 (남은기간: 54일)
   ✅ [양호] React 18.2.0
   🚨 [만료됨] MongoDB 4.4.10 (종료일: 2024-02-29)
   -> 총 4건의 EoS 위험/경고 자산이 발견되었습니다.

--------------------------------------------------

🧠 [Phase 2] 최신 보안 뉴스 & 취약점 AI 정밀 분석 중...
   -> 보안 권고문 10건 수집 완료.
   -> Gemini AI가 뉴스를 분석하고 있습니다... (Deep Dive)
   -> 분석 완료 (25.55초)

==================== [최종 보안 리포트] ====================
🚨 [위험] [긴급] React DOM 라이브러리 원격 코드 실행 취약점
   타겟: React (Ver: 18.2.0) [테스트용 주입]
   이유: React 18.3.0 미만 버전에서 발생하는 원격 코드 실행 취약점 영향 범위에 자산 버전(18.2.0)이 포함됨.
   🔗 http://test-url.com
--------------------------------------------------
🚨 [위험] 美 CISA 발표 주요 Exploit 정보공유(Update. 2025-12-29)
   타겟: MongoDB (Ver: 4.4.10)
   이유: CISA 발표 MongoDB Server 취약점(CVE-2025-14847) 관련 제품군 일치. 버전 미표기 위험으 로 판단.
   🔗 https://knvd.krcert.or.kr/detailSecNo.do?IDX=6656
--------------------------------------------------
🚨 [위험] MongoDB 제품 보안 업데이트 권고
   타겟: MongoDB (Ver: 4.4.10)
   이유: 취약점(CVE-2025-14847) 영향 범위인 4.4.0 이상 ~ 4.4.30 미만에 자산 버전(4.4.10)이 포 함됨.
   🔗 https://knvd.krcert.or.kr/detailSecNo.do?IDX=6655
--------------------------------------------------
```
---

## 🛠️ 기술 스택 (Tech Stack)
- **Language:** Python 3.13
- **LLM Engine:** Google Gemini
- **Framework:** LangChain
- **Data Source:**
  - EoS Info: `endoflife.date` API
  - Threat Intel: KISA 보안공지 RSS (`feedparser`)
- **Data Processing:** Pandas, Regular Expressions

---

## 🚀 AI Engineering & Troubleshooting

프로젝트 개발 중 LLM(Gemini)을 연동하며 발생한 주요 이슈와 해결 과정을 정리

### 1. API Rate Limit 해결을 위한 배치 처리 (Batch Processing) 전환
- **문제 상황 (Problem):**
  - 초기에는 수집된 뉴스 10건을 `for` 반복문으로 하나씩 AI에게 보내서 분석함.
  - 이 방식은 뉴스 개수만큼 API를 호출하게 되어, `429 RESOURCE_EXHAUSTED` (Quota Exceeded) 에러가 빈번하게 발생하고 분석 속도가 느림.

  - **해결책 (Solution):**
  - 개별 호출 대신, 수집된 모든 뉴스를 하나의 거대한 텍스트 블록(Context)으로 합침.
  - 모든 뉴스를 분석하도록 구조를 변경하여 API 호출 횟수를 **N회 → 1회**로 줄임.
  - 정확도는 떨어질수 있으나, 하루 제한때문에 임시적으로..

### 2. RAG 품질 향상을 위한 데이터 전처리 (Data Preprocessing)
- **문제 상황 (Problem):**
  - RSS에서 가져온 데이터(`description`)에 HTML 태그(<`br`>, <`table`>, `&nbsp;`)와 불필요한 공백이 다수 포함됨.
  - 이는 LLM의 토큰(Token)을 낭비할 뿐만 아니라, AI가 텍스트의 맥락을 이해하는 데 방해가 됨

  - **해결책 (Solution):**
  - **정규표현식(Regex) 적용**: re 모듈을 사용하여 HTML 태그를 제거하고 순수 텍스트(Plain Text)만 추출하는 전처리 파이프라인 구축.
  - **데이터 소스 최적화**: 단순 공지사항 URL 대신, 상세 취약점 정보(CVE, 영향 버전 등)가 포함된 '보안 권고문' URL로 변경하여 AI 판단 정확도 향상.
